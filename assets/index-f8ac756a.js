import{d as v,r as l,a as y,o as k,b as x,c as _,e as n,w as g,v as w,t as O,F as C,f as S}from"./index-27305ecb.js";const T={class:"textarea"},N={style:{color:"#fff"}},E=v({__name:"index",setup(D){const s=l(""),r=l(""),e=y({method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer sk-440c67d3929145b1b7f309118ace8db6"},body:JSON.stringify({model:"deepseek-chat",messages:[{role:"user",content:""}],stream:!0})}),u=async()=>{var d;s.value="",typeof e.body=="string"&&(e.body=JSON.parse(e.body)),e.body.messages[0]={role:"user",content:r.value},e.body=JSON.stringify(e.body);const o=await fetch("https://api.deepseek.com/chat/completions",e);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const t=(d=o.body)==null?void 0:d.getReader();let a=!1;for(;!a;){const{value:p,done:f}=await(t==null?void 0:t.read());if(f){a=!0;break}const i=new TextDecoder().decode(p),c=i.replace("data:","");if(i.includes("[DONE]"))continue;const h=c.lastIndexOf("data:"),m=c.substring(0,h),b=c.replace(m,"").replace("data:","");s.value=s.value+JSON.parse(b).choices[0].delta.content}};return k(()=>{}),x(()=>{}),(o,t)=>(S(),_(C,null,[n("div",T,[g(n("textarea",{name:"",id:"","onUpdate:modelValue":t[0]||(t[0]=a=>r.value=a),placeholder:"请输入需要查询的问题"},null,512),[[w,r.value]])]),n("button",{onClick:u},"确定"),n("div",N,O(s.value),1)],64))}});export{E as default};
